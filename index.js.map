{"version":3,"file":"index.js","sources":["../node_modules/.pnpm/img-load@2.0.0/node_modules/img-load/lib/img-load.js","../lib/img-extract.js","../lib/canvas.js","../lib/pixels.js","../src/icons.js","../src/palette.js","../src/sprites.js","../src/view.js","../src/index.js"],"sourcesContent":["export default function loadImage(path) {\n  return new Promise(function (resolve, reject) {\n    var image = new Image()\n    image.src = path\n    image.onload = function () {\n      resolve(image)\n    }\n    image.onerror = function () {\n      reject(new Error(\"Failed to load image `\" + path + \"`\"))\n    }\n  })\n}\n","export default function extract(image, x, y, width, height) {\n\tvar canvas = document.createElement(\"canvas\")\n\tvar context = canvas.getContext(\"2d\")\n\tcanvas.width = width\n\tcanvas.height = height\n\tcontext.drawImage(image, -x, -y)\n\treturn canvas\n}\n","export default function Canvas(width, height) {\n\tvar canvas = document.createElement(\"canvas\")\n\tcanvas.width = width\n\tcanvas.height = height\n\treturn canvas.getContext(\"2d\")\n}\n","export function fromImage(image) {\n\tvar canvas = document.createElement(\"canvas\")\n\tvar context = canvas.getContext(\"2d\")\n\tcanvas.width = image.width\n\tcanvas.height = image.height\n\tcontext.drawImage(image, 0, 0)\n\treturn context.getImageData(0, 0, canvas.width, canvas.height)\n}\n\nexport function toImage(data) {\n\tvar canvas = document.createElement(\"canvas\")\n\tvar context = canvas.getContext(\"2d\")\n\tcanvas.width = data.width\n\tcanvas.height = data.height\n\tcontext.putImageData(data, 0, 0)\n\treturn canvas\n}\n\nexport function get(image, x, y) {\n\tvar i = (y * image.width + x) * 4\n\tvar r = image.data[i]\n\tvar g = image.data[i + 1]\n\tvar b = image.data[i + 2]\n\tvar a = image.data[i + 3]\n\treturn [ r, g, b, a ]\n}\n\nexport function set(image, x, y, color) {\n\tvar i = (y * image.width + x) * 4\n\timage.data[i + 0] = color[0]\n\timage.data[i + 1] = color[1]\n\timage.data[i + 2] = color[2]\n\timage.data[i + 3] = color[3]\n}\n\nexport function replace(image, oldColor, newColor) {\n\tif (!oldColor[3]) {\n\t\toldColor = oldColor.slice()\n\t\toldColor[3] = 255\n\t}\n\tif (!newColor[3]) {\n\t\tnewColor = newColor.slice()\n\t\tnewColor[3] = 255\n\t}\n\tfor (var i = 0; i < image.data.length; i += 4) {\n\t\tfor (var c = 0; c < 4; c++) {\n\t\t\tif (image.data[i + c] !== oldColor[c]) {\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tif (c !== 4) {\n\t\t\tcontinue\n\t\t}\n\n\t\tfor (var c = 0; c < 4; c++) {\n\t\t\timage.data[i + c] = newColor[c]\n\t\t}\n\t}\n\treturn image\n}\n","export const units = {\n\tfighter: \"axe\",\n\tknight: \"shield\",\n\tthief: \"dagger\",\n\tmage: \"hat\",\n\tsoldier: \"sword\",\n\tarcher: \"bow\"\n}\n","import * as pixels from \"../lib/pixels\"\n\nconst matrix = [\n\t[ \"white\", \"cyan\", \"blue\", \"navy\"   ],\n\t[ \"black\", \"pink\", \"red\",  \"purple\" ]\n]\n\nconst mappings = {\n\tpieces: {\n\t\tplayer: {\n\t\t\tlight: \"cyan\",\n\t\t\tnormal: \"blue\",\n\t\t\tdark: \"navy\"\n\t\t},\n\t\tenemy: {\n\t\t\tlight: \"pink\",\n\t\t\tnormal: \"red\",\n\t\t\tdark: \"purple\"\n\t\t}\n\t}\n}\n\nexport default function match(image) {\n\tlet palette = {}\n\tlet data = pixels.fromImage(image)\n\tfor (let y = 0; y < matrix.length; y++) {\n\t\tfor (let x = 0; x < matrix[y].length; x++) {\n\t\t\tlet colorname = matrix[y][x]\n\t\t\tpalette[colorname] = pixels.get(data, x, y)\n\t\t}\n\t}\n\tassign(palette, mappings)\n\treturn palette\n\n\tfunction assign(obj, mappings) {\n\t\tfor (let n in mappings) {\n\t\t\tif (typeof mappings[n] === \"object\") {\n\t\t\t\tobj[n] = {}\n\t\t\t\tassign(obj[n], mappings[n])\n\t\t\t} else {\n\t\t\t\tobj[n] = palette[mappings[n]]\n\t\t\t}\n\t\t}\n\t}\n}\n","import srcmap from \"../dist/tmp/sprites.json\"\nimport extract from \"../lib/img-extract\"\nimport Canvas from \"../lib/canvas\"\nimport * as pixels from \"../lib/pixels\"\nimport * as iconnames from \"./icons\"\nimport matchPalette from \"./palette\"\n\nexport default function normalize(spritesheet) {\n\tlet sprites = disasm(spritesheet, srcmap)\n\tlet palette = matchPalette(sprites.palette)\n\tlet icons = disasmIcons(sprites)\n\tlet pieces = disasmPieces(sprites.piece, icons, palette)\n\treturn { pieces }\n}\n\nfunction disasm(sheet, srcmap) {\n\tlet sprites = {}\n\tfor (let id in srcmap) {\n\t\tif (Array.isArray(srcmap[id])) {\n\t\t\tlet [ x, y, w, h ] = srcmap[id]\n\t\t\tsprites[id] = extract(sheet, x, y, w, h)\n\t\t} else {\n\t\t\tsprites[id] = disasm(sheet, srcmap[id])\n\t\t}\n\t}\n\treturn sprites\n}\n\nfunction disasmPieces(base, icons, palette) {\n\tlet pieces = {}\n\tfor (let faction in palette.pieces) {\n\t\tpieces[faction] = {}\n\t\tlet subpal = palette.pieces[faction]\n\t\tfor (let unittype in iconnames.units) {\n\t\t\tlet iconname = iconnames.units[unittype]\n\t\t\tlet icon = icons[iconname]\n\t\t\tlet piece = Piece(base, icon, subpal)\n\t\t\tpieces[faction][unittype] = piece\n\t\t}\n\t}\n\n\treturn pieces\n\n\tfunction Piece(base, icon, colors) {\n\t\tlet sprite = base\n\t\t\t.getContext(\"2d\")\n\t\t\t.getImageData(0, 0, base.width, base.height)\n\t\tpixels.replace(sprite, palette.white, colors.normal)\n\t\tpixels.replace(sprite, palette.black, colors.dark)\n\n\t\tlet piece = Canvas(base.width, base.height)\n\t\tpiece.putImageData(sprite, 0, 0)\n\n\t\tlet tmp = Canvas(8, 8)\n\t\tlet template = icon.getContext(\"2d\")\n\t\t\t.getImageData(0, 0, icon.width, icon.height)\n\n\t\tpixels.replace(template, palette.white, colors.light)\n\t\ttmp.putImageData(template, 0, 0)\n\t\tpiece.drawImage(tmp.canvas, 5, 5)\n\n\t\tpixels.replace(template, colors.light, colors.dark)\n\t\ttmp.putImageData(template, 0, 0)\n\t\tpiece.drawImage(tmp.canvas, 5, 4)\n\n\t\treturn piece.canvas\n\t}\n}\n\nfunction disasmIcons(sprites) {\n\treturn {\n\t\taxe: sprites[\"icon-axe\"],\n\t\tbow: sprites[\"icon-bow\"],\n\t\tdagger: sprites[\"icon-dagger\"],\n\t\that: sprites[\"icon-hat\"],\n\t\tshield: sprites[\"icon-shield\"],\n\t\tsword: sprites[\"icon-sword\"],\n\t}\n}\n","export function create(width, height, sprites) {\n\treturn {\n\t\twidth: window.innerWidth,\n\t\theight: window.innerHeight,\n\t\tnative: { width, height },\n\t\tscale: 1,\n\t\tsprites: sprites,\n\t\telement: document.createElement(\"canvas\"),\n\t\tstate: {\n\t\t\tcamera: { x: 0, y: 0 },\n\t\t\tpointer: {\n\t\t\t\tposition: { x: 0, y: 0 },\n\t\t\t\tpressed: null,\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function init(view) {\n\tlet { camera, pointer } = view.state\n\tfunction onresize() {\n\t\tlet scaleX = Math.max(1, Math.floor(window.innerWidth / view.native.width))\n\t\tlet scaleY = Math.max(1, Math.floor(window.innerHeight / view.native.height))\n\t\tview.scale = Math.min(scaleX, scaleY)\n\t\tview.width = Math.ceil(window.innerWidth / view.scale)\n\t\tview.height = Math.ceil(window.innerHeight / view.scale)\n\n\t\tlet canvas = view.element\n\t\tcanvas.width = view.width\n\t\tcanvas.height = view.height\n\t\tcanvas.style.transform = `scale(${ view.scale })`\n\t}\n\n\tlet actions = {\n\t\tresize() {\n\t\t\tonresize()\n\t\t\trender(view)\n\t\t},\n\t\tpress(event) {\n\t\t\tdocument.body.classList.add(\"-dragging\")\n\t\t\tpointer.position = getPosition(event)\n\t\t\tif (pointer.position) {\n\t\t\t\tpointer.pressed = {\n\t\t\t\t\tx: pointer.position.x - camera.x * view.scale,\n\t\t\t\t\ty: pointer.position.y - camera.y * view.scale\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmove(event) {\n\t\t\tpointer.position = getPosition(event)\n\t\t\tif (pointer.position && pointer.pressed) {\n\t\t\t\tcamera.x = (pointer.position.x - pointer.pressed.x) / view.scale\n\t\t\t\tcamera.y = (pointer.position.y - pointer.pressed.y) / view.scale\n\t\t\t\trender(view)\n\t\t\t}\n\t\t},\n\t\trelease() {\n\t\t\tdocument.body.classList.remove(\"-dragging\")\n\t\t\tpointer.pressed = null\n\t\t}\n\t}\n\n\tfunction getPosition(event) {\n\t\tlet x = event.pageX || event.touches && event.touches[0].pageX\n\t\tlet y = event.pageY || event.touches && event.touches[0].pageY\n\t\tif (x === undefined || y === undefined) return null\n\t\treturn { x, y }\n\t}\n\n\tactions.resize()\n\twindow.addEventListener(\"resize\", actions.resize)\n\twindow.addEventListener(\"mousedown\", actions.press)\n\twindow.addEventListener(\"mousemove\", actions.move)\n\twindow.addEventListener(\"mouseup\", actions.release)\n\twindow.addEventListener(\"touchstart\", actions.press)\n\twindow.addEventListener(\"touchmove\", actions.move)\n\twindow.addEventListener(\"touchend\", actions.release)\n}\n\nexport function render(view) {\n\tlet sprites = view.sprites\n\tlet camera = view.state.camera\n\tlet canvas = view.element\n\tlet context = canvas.getContext(\"2d\")\n\tcontext.fillStyle = \"black\"\n\tcontext.fillRect(0, 0, canvas.width, canvas.height)\n\n\tlet center = {\n\t\tx: Math.round(view.width / 2 - 64 + camera.x),\n\t\ty: Math.round(view.height / 2 - 64 + camera.y)\n\t}\n\n\tcontext.fillStyle = \"#112\"\n\tfor (let i = 0; i < 8; i++) {\n\t\tfor (let j = 0; j < 8; j++) {\n\t\t\tif ((j + i) % 2) {\n\t\t\t\tlet x = Math.round(j * 16 + center.x)\n\t\t\t\tlet y = Math.round(i * 16 + center.y)\n\t\t\t\tcontext.fillRect(x, y, 16, 16)\n\t\t\t}\n\t\t}\n\t}\n\n\tcontext.drawImage(sprites.pieces.player.soldier, center.x +  0, center.y -  1)\n\tcontext.drawImage(sprites.pieces.player.fighter, center.x + 16, center.y -  1)\n\tcontext.drawImage(sprites.pieces.player.knight,  center.x + 32, center.y -  1)\n\tcontext.drawImage(sprites.pieces.player.thief,   center.x + 48, center.y -  1)\n\tcontext.drawImage(sprites.pieces.player.mage,    center.x + 64, center.y -  1)\n\tcontext.drawImage(sprites.pieces.player.archer,  center.x + 80, center.y -  1)\n\tcontext.drawImage(sprites.pieces.enemy.soldier,  center.x +  0, center.y + 15)\n\tcontext.drawImage(sprites.pieces.enemy.fighter,  center.x + 16, center.y + 15)\n\tcontext.drawImage(sprites.pieces.enemy.knight,   center.x + 32, center.y + 15)\n\tcontext.drawImage(sprites.pieces.enemy.thief,    center.x + 48, center.y + 15)\n\tcontext.drawImage(sprites.pieces.enemy.mage,     center.x + 64, center.y + 15)\n\tcontext.drawImage(sprites.pieces.enemy.archer,   center.x + 80, center.y + 15)\n}\n","import loadImage from \"img-load\"\nimport disasm from \"./sprites\"\nimport * as View from \"./view\"\n\nlet state = {}\nloadImage(\"sprites.png\").then(main)\n\nfunction main(sprites) {\n\tlet view = View.create(160, 160, disasm(sprites))\n\tdocument.body.appendChild(view.element)\n\tView.init(view)\n\t// requestAnimationFrame(loop)\n\n\tfunction loop() {\n\t\tView.init(view)\n\t\trequestAnimationFrame(loop)\n\t}\n}\n"],"names":["pixels.fromImage","pixels.get","matchPalette","iconnames.units","pixels.replace","View.create","disasm","View.init"],"mappings":"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"}